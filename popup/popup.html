<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Currency Converter Settings</title>
    <link rel="stylesheet" href="popup.css" />
    <link rel="stylesheet" href="ad-styles.css" />
  </head>
  <body class="bg-gray-50">
    <div
      class="w-96 min-h-[500px] bg-white"
      role="application"
      aria-label="Currency Converter Settings"
    >
      <!-- Header -->
      <header
        class="bg-gradient-to-r from-primary-500 to-secondary-500 text-white p-4"
        role="banner"
      >
        <div class="flex items-center justify-center gap-3">
          <span class="text-2xl" aria-hidden="true">üí±</span>
          <h1 class="text-lg font-semibold">Currency Converter</h1>
        </div>
      </header>

      <!-- Navigation Tabs -->
      <nav
        class="bg-gray-100 border-b tab-navigation"
        role="tablist"
        aria-label="Extension sections"
      >
        <div class="flex">
          <button
            id="settingsTab"
            class="tab-button tab-active"
            role="tab"
            aria-selected="true"
            aria-controls="settingsPanel"
            tabindex="0"
          >
            <span aria-hidden="true">‚öôÔ∏è</span>
            <span>Settings</span>
          </button>
          <button
            id="historyTab"
            class="tab-button"
            role="tab"
            aria-selected="false"
            aria-controls="historyPanel"
            tabindex="-1"
          >
            <span aria-hidden="true">üìö</span>
            <span>History</span>
          </button>
          <button
            id="favoritesTab"
            class="tab-button"
            role="tab"
            aria-selected="false"
            aria-controls="favoritesPanel"
            tabindex="-1"
          >
            <span aria-hidden="true">‚≠ê</span>
            <span>Favorites</span>
          </button>
          <button
            id="alertsTab"
            class="tab-button"
            role="tab"
            aria-selected="false"
            aria-controls="alertsPanel"
            tabindex="-1"
          >
            <span aria-hidden="true">üîî</span>
            <span>Alerts</span>
          </button>
          <button
            id="subscriptionTab"
            class="tab-button"
            role="tab"
            aria-selected="false"
            aria-controls="subscriptionPanel"
            tabindex="-1"
          >
            <span aria-hidden="true">üíé</span>
            <span>Premium</span>
          </button>
        </div>
      </nav>

      <!-- Main Content -->
      <main class="relative tab-content" role="main" id="main-content">
        <!-- Settings Panel -->
        <div
          id="settingsPanel"
          class="tab-panel compact-spacing"
          role="tabpanel"
          aria-labelledby="settingsTab"
        >
          <!-- Quick Stats -->
          <div
            class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3"
          >
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600">Conversions Today</span>
              <span id="conversionCount" class="font-semibold text-primary-600"
                >0</span
              >
            </div>
          </div>

          <!-- Currency Configuration -->
          <section
            class="setting-card"
            role="region"
            aria-labelledby="currency-config-heading"
            id="currency-selection"
          >
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg" aria-hidden="true">üéØ</span>
              <h2
                id="currency-config-heading"
                class="text-base font-semibold text-gray-900"
              >
                Primary Currencies
              </h2>
            </div>

            <div class="space-y-3">
              <div class="setting-group">
                <label
                  for="baseCurrency"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  Base Currency
                </label>
                <select
                  id="baseCurrency"
                  class="currency-select"
                  aria-describedby="base-currency-desc"
                  aria-required="true"
                >
                  <!-- Populated by JavaScript -->
                </select>
                <div id="base-currency-desc" class="sr-only">
                  Select the primary currency for conversions. This will be the
                  base currency shown in context menus.
                </div>
              </div>

              <div class="setting-group">
                <label
                  for="secondaryCurrency"
                  class="block text-sm font-medium text-gray-700 mb-1"
                >
                  Secondary Currency
                </label>
                <select
                  id="secondaryCurrency"
                  class="currency-select"
                  aria-describedby="secondary-currency-desc"
                  aria-required="true"
                >
                  <!-- Populated by JavaScript -->
                </select>
                <div id="secondary-currency-desc" class="sr-only">
                  Select the secondary currency for conversions. This will be
                  the target currency shown in context menus.
                </div>
              </div>
            </div>
          </section>

          <!-- Additional Currencies -->
          <section class="setting-card">
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <span class="text-lg">üìã</span>
                <h2 class="text-base font-semibold text-gray-900">
                  Quick Convert
                </h2>
              </div>
              <span class="feature-badge">Free: 3 max</span>
            </div>

            <div id="additionalCurrencies" class="space-y-2">
              <!-- Populated by JavaScript -->
            </div>

            <button
              id="addCurrency"
              class="w-full mt-2 px-3 py-2 border border-gray-300 rounded-lg text-sm text-gray-600 hover:bg-gray-50 transition-colors"
            >
              + Add Currency
            </button>
          </section>

          <!-- Test Conversion Section -->
          <section class="setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg">üß™</span>
              <h2 class="text-base font-semibold text-gray-900">
                Test Conversion
              </h2>
            </div>

            <div class="space-y-3">
              <div class="grid grid-cols-2 gap-2">
                <div>
                  <label class="block text-xs font-medium text-gray-700 mb-1">
                    From Currency
                  </label>
                  <select
                    id="testFromCurrency"
                    class="w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  >
                    <!-- Populated by JavaScript -->
                  </select>
                </div>
                <div>
                  <label class="block text-xs font-medium text-gray-700 mb-1">
                    To Currency
                  </label>
                  <select
                    id="testToCurrency"
                    class="w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                  >
                    <!-- Populated by JavaScript -->
                  </select>
                </div>
              </div>

              <div>
                <label class="block text-xs font-medium text-gray-700 mb-1">
                  Amount
                </label>
                <input
                  type="number"
                  id="testAmount"
                  value="100"
                  min="0.01"
                  step="0.01"
                  class="w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-primary-500 focus:border-transparent"
                />
              </div>

              <button
                id="testConversion"
                class="w-full px-3 py-2 bg-primary-600 text-white text-sm font-medium rounded-lg hover:bg-primary-700 transition-colors"
              >
                Test Conversion
              </button>

              <div id="testConversionResult" class="mt-3">
                <!-- Test result will appear here -->
              </div>
            </div>
          </section>

          <!-- Settings -->
          <section
            class="setting-card"
            role="region"
            aria-labelledby="preferences-heading"
            id="settings"
          >
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg" aria-hidden="true">‚öôÔ∏è</span>
              <h2
                id="preferences-heading"
                class="text-base font-semibold text-gray-900"
              >
                Preferences
              </h2>
            </div>

            <div
              class="space-y-3"
              role="group"
              aria-labelledby="preferences-heading"
            >
              <!-- Show Confidence -->
              <div class="flex items-center justify-between">
                <label for="showConfidence" class="text-sm text-gray-700">
                  Show detection confidence
                </label>
                <button
                  id="showConfidence"
                  class="toggle-switch"
                  role="switch"
                  aria-checked="true"
                  aria-labelledby="showConfidence-label"
                  aria-describedby="showConfidence-desc"
                >
                  <span class="toggle-thumb"></span>
                </button>
                <div id="showConfidence-desc" class="sr-only">
                  When enabled, shows visual feedback animations during currency
                  conversions.
                </div>
              </div>

              <!-- Auto Convert -->
              <div class="flex items-center justify-between">
                <div>
                  <label for="autoConvert" class="text-sm text-gray-700"
                    >Auto-convert on selection</label
                  >
                  <span class="feature-badge ml-1" aria-label="Premium feature"
                    >Premium</span
                  >
                </div>
                <button
                  id="autoConvert"
                  class="toggle-switch"
                  role="switch"
                  aria-checked="false"
                  aria-disabled="true"
                  disabled
                >
                  <span class="toggle-thumb"></span>
                </button>
              </div>

              <!-- Notifications -->
              <div class="flex items-center justify-between">
                <div>
                  <label for="showNotifications" class="text-sm text-gray-700"
                    >Rate change notifications</label
                  >
                  <span class="feature-badge ml-1" aria-label="Premium feature"
                    >Premium</span
                  >
                </div>
                <button
                  id="showNotifications"
                  class="toggle-switch"
                  role="switch"
                  aria-checked="false"
                  aria-disabled="true"
                  disabled
                >
                  <span class="toggle-thumb"></span>
                </button>
              </div>

              <!-- Precision -->
              <div class="space-y-1">
                <label for="precision" class="block text-sm text-gray-700">
                  Decimal places
                </label>
                <select
                  id="precision"
                  class="currency-select"
                  aria-describedby="precision-desc"
                >
                  <option value="0">0 (123)</option>
                  <option value="1">1 (123.4)</option>
                  <option value="2" selected>2 (123.45)</option>
                  <option value="3">3 (123.456)</option>
                  <option value="4">4 (123.4567)</option>
                </select>
                <div id="precision-desc" class="sr-only">
                  Choose how many decimal places to show in currency
                  conversions.
                </div>
              </div>
            </div>
          </section>

          <!-- 
          Phase 9, Task 9.4: Remove unused features
          COMMENTED OUT: Privacy Compliance Section
          -->
          <!--
          <section
            class="setting-card privacy-section"
            role="region"
            aria-labelledby="privacy-heading"
          >
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <span class="text-lg" aria-hidden="true">üõ°Ô∏è</span>
                <h2
                  id="privacy-heading"
                  class="text-base font-semibold text-gray-900"
                >
                  Privacy Compliance
                </h2>
              </div>
              <span
                class="text-xs text-blue-600 font-medium"
                id="privacyComplianceStatus"
                aria-label="Privacy compliance status"
                >GDPR Ready</span
              >
            </div>

            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <label for="privacyMode" class="text-sm text-gray-700"
                    >Privacy Mode</label
                  >
                  <div class="text-xs text-gray-500">
                    Enhanced privacy protection
                  </div>
                </div>
                <button
                  id="privacyMode"
                  class="toggle-switch"
                  role="switch"
                  aria-checked="false"
                  aria-describedby="privacy-mode-desc"
                >
                  <span class="toggle-thumb"></span>
                </button>
                <div id="privacy-mode-desc" class="sr-only">
                  When enabled, minimizes data collection and disables
                  non-essential tracking
                </div>
              </div>

              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <label for="analyticsConsent" class="text-sm text-gray-700"
                    >Usage Analytics</label
                  >
                  <div class="text-xs text-gray-500">
                    Help improve the extension
                  </div>
                </div>
                <button
                  id="analyticsConsent"
                  class="toggle-switch"
                  role="switch"
                  aria-checked="false"
                  aria-describedby="analytics-consent-desc"
                >
                  <span class="toggle-thumb"></span>
                </button>
                <div id="analytics-consent-desc" class="sr-only">
                  Allow collection of anonymous usage statistics to improve the
                  extension
                </div>
              </div>

              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <label
                    for="personalizationConsent"
                    class="text-sm text-gray-700"
                    >Personalization</label
                  >
                  <div class="text-xs text-gray-500">
                    Customize your experience
                  </div>
                </div>
                <button
                  id="personalizationConsent"
                  class="toggle-switch"
                  role="switch"
                  aria-checked="true"
                  aria-describedby="personalization-consent-desc"
                >
                  <span class="toggle-thumb"></span>
                </button>
                <div id="personalization-consent-desc" class="sr-only">
                  Allow data processing for personalized features and
                  recommendations
                </div>
              </div>
            </div>

            <div class="mt-4 pt-3 border-t border-gray-200">
              <div class="text-sm font-medium text-gray-700 mb-2">
                Data Management
              </div>

              <div class="mb-3">
                <label
                  for="dataRetention"
                  class="block text-xs text-gray-600 mb-1"
                >
                  Data Retention Period
                </label>
                <select
                  id="dataRetention"
                  class="w-full px-2 py-1 border border-gray-300 rounded text-xs"
                >
                  <option value="30">30 days</option>
                  <option value="90">90 days</option>
                  <option value="180">180 days</option>
                  <option value="365" selected>1 year</option>
                  <option value="0">Keep indefinitely</option>
                </select>
              </div>

              <div class="flex items-center justify-between mb-3">
                <label class="text-xs text-gray-700"
                  >Auto-delete old data</label
                >
                <button
                  id="autoDeleteData"
                  class="toggle-switch scale-75"
                  role="switch"
                  aria-checked="true"
                >
                  <span class="toggle-thumb"></span>
                </button>
              </div>

              <div class="grid grid-cols-2 gap-2 mt-3">
                <button
                  id="exportUserData"
                  class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors"
                  title="Export all your data"
                >
                  üì• Export Data
                </button>
                <button
                  id="deleteUserData"
                  class="text-xs px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors"
                  title="Delete your data"
                >
                  üóëÔ∏è Delete Data
                </button>
              </div>
            </div>

            <div class="mt-4 pt-3 border-t border-gray-200">
              <div class="text-sm font-medium text-gray-700 mb-2">
                Consent History
              </div>
              <div id="consentHistory" class="text-xs text-gray-600 space-y-1">
              </div>
              <button
                id="viewPrivacyPolicy"
                class="mt-2 text-xs text-blue-600 hover:text-blue-800 underline"
              >
                View Privacy Policy
              </button>
            </div>
          </section>
          -->

          <!-- Currency Stats Dashboard -->
          <section class="setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg">üìä</span>
              <h2 class="text-base font-semibold text-gray-900">
                Currency Database
              </h2>
            </div>

            <div id="currencyStats" class="grid grid-cols-2 gap-3 text-sm">
              <div class="stat-item">
                <span class="text-gray-600">Total Currencies</span>
                <span
                  id="totalCurrencies"
                  class="font-semibold text-primary-600"
                  >--</span
                >
              </div>
              <div class="stat-item">
                <span class="text-gray-600">Popular</span>
                <span
                  id="popularCurrencies"
                  class="font-semibold text-green-600"
                  >--</span
                >
              </div>
              <div class="stat-item">
                <span class="text-gray-600">Regions</span>
                <span id="totalRegions" class="font-semibold text-blue-600"
                  >--</span
                >
              </div>
              <div class="stat-item">
                <span class="text-gray-600">Favorites</span>
                <span id="favoriteCount" class="font-semibold text-purple-600"
                  >--</span
                >
              </div>
            </div>

            <!-- Regional Overview -->
            <div class="mt-3 pt-3 border-t border-gray-200">
              <div class="text-xs text-gray-500 mb-2">By Region:</div>
              <div id="regionStats" class="flex flex-wrap gap-1">
                <!-- Populated by JavaScript -->
              </div>
            </div>
          </section>

          <!-- Regional Currency Filter -->
          <section class="setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg">üåç</span>
              <h2 class="text-base font-semibold text-gray-900">
                Browse by Region
              </h2>
            </div>

            <div class="grid grid-cols-2 gap-2">
              <button
                id="regionAmericas"
                class="region-button"
                data-region="americas"
              >
                <span class="text-lg">üåé</span>
                <div class="text-left">
                  <div class="font-medium text-sm">Americas</div>
                  <div class="text-xs text-gray-500" id="americasCount">
                    -- currencies
                  </div>
                </div>
              </button>

              <button
                id="regionEurope"
                class="region-button"
                data-region="europe"
              >
                <span class="text-lg">üá™üá∫</span>
                <div class="text-left">
                  <div class="font-medium text-sm">Europe</div>
                  <div class="text-xs text-gray-500" id="europeCount">
                    -- currencies
                  </div>
                </div>
              </button>

              <button id="regionAsia" class="region-button" data-region="asia">
                <span class="text-lg">üåè</span>
                <div class="text-left">
                  <div class="font-medium text-sm">Asia & Pacific</div>
                  <div class="text-xs text-gray-500" id="asiaCount">
                    -- currencies
                  </div>
                </div>
              </button>

              <button
                id="regionAfrica"
                class="region-button"
                data-region="africa"
              >
                <span class="text-lg">üåç</span>
                <div class="text-left">
                  <div class="font-medium text-sm">Africa & ME</div>
                  <div class="text-xs text-gray-500" id="africaCount">
                    -- currencies
                  </div>
                </div>
              </button>
            </div>
          </section>

          <!-- Security Settings Section -->
          <!-- 
          Phase 9, Task 9.4: Remove unused features
          COMMENTED OUT: Security & Privacy Section
          -->
          <!--
          <section
            class="setting-card security-section"
            role="region"
            aria-labelledby="security-heading"
          >
            <div class="flex items-center justify-between mb-3">
              <div class="flex items-center gap-2">
                <span class="text-lg" aria-hidden="true">üîí</span>
                <h2
                  id="security-heading"
                  class="text-base font-semibold text-gray-900"
                >
                  Security & Privacy
                </h2>
              </div>
              <span
                class="text-xs text-green-600 font-medium"
                id="securityStatus"
                aria-label="Security status"
                >Secure</span
              >
            </div>

            <div class="mb-4 p-3 bg-gray-50 rounded-lg">
              <div class="text-xs text-gray-600 mb-2">Security Overview</div>
              <div class="grid grid-cols-2 gap-3 text-center">
                <div>
                  <div
                    class="text-lg font-semibold text-blue-600"
                    id="encryptedDataCount"
                  >
                    0
                  </div>
                  <div class="text-xs text-gray-500">Encrypted Keys</div>
                </div>
                <div>
                  <div
                    class="text-lg font-semibold text-green-600"
                    id="securityEventsCount"
                  >
                    0
                  </div>
                  <div class="text-xs text-gray-500">Security Events</div>
                </div>
              </div>
            </div>

            <div class="mb-4">
              <div class="text-sm font-medium text-gray-700 mb-2">
                API Key Management
              </div>
              <div id="apiKeyStatus" class="space-y-2">
              </div>
              <button
                id="manageApiKeys"
                class="mt-2 w-full text-xs px-3 py-2 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors"
                title="Manage API keys"
              >
                üîë Manage API Keys
              </button>
            </div>

            <div class="mb-4">
              <div class="text-sm font-medium text-gray-700 mb-2">
                Rate Limiting
              </div>
              <div id="rateLimitStatus" class="text-xs text-gray-600">
                <div class="flex justify-between">
                  <span>API Calls:</span>
                  <span id="apiCallsRemaining">--/--</span>
                </div>
                <div class="flex justify-between">
                  <span>Settings Updates:</span>
                  <span id="settingsUpdatesRemaining">--/--</span>
                </div>
              </div>
            </div>

            <div class="flex gap-2">
              <button
                id="clearSecurityLogs"
                class="flex-1 text-xs px-2 py-1 bg-yellow-100 text-yellow-700 rounded hover:bg-yellow-200 transition-colors"
                title="Clear security logs"
              >
                üóëÔ∏è Clear Logs
              </button>
              <button
                id="exportSecurityData"
                class="flex-1 text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors"
                title="Export security data"
              >
                üì§ Export
              </button>
            </div>
          </section>
          -->

          <!-- 
          Phase 9, Task 9.4: Remove unused features
          COMMENTED OUT: Privacy & Data Section
          -->
          <!--
          <section class="setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg">üîí</span>
              <h2 class="text-base font-semibold text-gray-900">
                Privacy & Data
              </h2>
            </div>

            <div
              class="bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 mb-4"
            >
              <h3 class="text-sm font-semibold text-gray-800 mb-2">
                Privacy Status
              </h3>

              <div class="mb-2">
                <div class="text-xs text-gray-600 mb-1">Consent Status:</div>
                <div id="consentStatus" class="text-sm">Loading...</div>
              </div>

              <div class="grid grid-cols-2 gap-2 mb-2">
                <div class="text-center">
                  <div
                    class="text-lg font-semibold text-blue-600"
                    id="dataCategoriesCount"
                  >
                    0
                  </div>
                  <div class="text-xs text-gray-600">Data Items</div>
                </div>
                <div class="text-center">
                  <div class="text-lg font-semibold text-green-600">‚úì</div>
                  <div class="text-xs text-gray-600">GDPR Compliant</div>
                </div>
              </div>

              <div class="text-xs">
                <div class="text-gray-600 mb-1">Data Retention:</div>
                <div id="retentionInfo">Loading...</div>
              </div>
            </div>

            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <div class="text-sm font-medium text-gray-900">
                    Privacy Mode
                  </div>
                  <div class="text-xs text-gray-600">
                    Minimize data collection
                  </div>
                </div>
                <label class="switch">
                  <input type="checkbox" id="privacyMode" />
                  <span class="slider"></span>
                </label>
              </div>

              <div class="bg-gray-50 rounded-lg p-3">
                <h4 class="text-sm font-semibold text-gray-800 mb-2">
                  Consent Preferences
                </h4>
                <div class="space-y-2">
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      id="consentAnalytics"
                      class="rounded"
                    />
                    <span class="text-xs text-gray-700">Usage Analytics</span>
                  </label>
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      id="consentPersonalization"
                      class="rounded"
                    />
                    <span class="text-xs text-gray-700"
                      >Enhanced Personalization</span
                    >
                  </label>
                  <label class="flex items-center gap-2">
                    <input
                      type="checkbox"
                      id="consentMarketing"
                      class="rounded"
                    />
                    <span class="text-xs text-gray-700"
                      >Marketing Communications</span
                    >
                  </label>
                </div>
                <button
                  id="updateConsent"
                  class="w-full mt-2 text-xs bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600 transition-colors"
                >
                  Update Preferences
                </button>
              </div>
            </div>

            <div
              class="bg-yellow-50 border border-yellow-200 rounded-lg p-3 mt-4"
            >
              <h4 class="text-sm font-semibold text-gray-800 mb-2">
                Your Data Rights
              </h4>

              <div class="grid grid-cols-2 gap-2 mb-3">
                <button
                  id="exportAllData"
                  class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors"
                >
                  üìÑ Export JSON
                </button>
                <button
                  id="exportDataCSV"
                  class="text-xs bg-green-500 text-white px-3 py-1 rounded hover:bg-green-600 transition-colors"
                >
                  üìä Export CSV
                </button>
              </div>

              <div class="bg-white rounded p-2 mb-3">
                <div class="text-xs font-semibold text-gray-700 mb-2">
                  Delete Selected Data:
                </div>
                <div class="grid grid-cols-2 gap-1 text-xs">
                  <label class="flex items-center gap-1">
                    <input
                      type="checkbox"
                      id="deleteHistory"
                      class="rounded text-xs"
                    />
                    <span>History</span>
                  </label>
                  <label class="flex items-center gap-1">
                    <input
                      type="checkbox"
                      id="deleteFavorites"
                      class="rounded text-xs"
                    />
                    <span>Favorites</span>
                  </label>
                  <label class="flex items-center gap-1">
                    <input
                      type="checkbox"
                      id="deleteSettings"
                      class="rounded text-xs"
                    />
                    <span>Settings</span>
                  </label>
                  <label class="flex items-center gap-1">
                    <input
                      type="checkbox"
                      id="deleteAnalytics"
                      class="rounded text-xs"
                    />
                    <span>Analytics</span>
                  </label>
                </div>
                <button
                  id="deleteSelectedData"
                  class="w-full mt-2 text-xs bg-orange-500 text-white px-3 py-1 rounded hover:bg-orange-600 transition-colors"
                >
                  Delete Selected
                </button>
              </div>

              <div class="border-t border-yellow-300 pt-2">
                <button
                  id="deleteAllData"
                  class="w-full text-xs bg-red-500 text-white px-3 py-1 rounded hover:bg-red-600 transition-colors font-medium"
                >
                  üóëÔ∏è Delete All Data (Right to be Forgotten)
                </button>
              </div>
            </div>

            <div class="grid grid-cols-2 gap-2 mt-4">
              <button
                id="viewPrivacyPolicy"
                class="text-xs bg-gray-500 text-white px-3 py-1 rounded hover:bg-gray-600 transition-colors"
              >
                üìã Privacy Policy
              </button>
              <button
                id="showGdprRights"
                class="text-xs bg-purple-500 text-white px-3 py-1 rounded hover:bg-purple-600 transition-colors"
              >
                ‚öñÔ∏è Your Rights
              </button>
            </div>

            <div class="mt-3">
              <button
                id="runDataCleanup"
                class="w-full text-xs bg-indigo-500 text-white px-3 py-1 rounded hover:bg-indigo-600 transition-colors"
              >
                üßπ Run Data Cleanup
              </button>
            </div>

            <div class="mt-4 bg-gray-50 rounded-lg p-2">
              <div class="text-xs font-semibold text-gray-700 mb-1">
                Recent Activity:
              </div>
              <div id="recentPrivacyActivity" class="text-xs text-gray-600">
                Loading...
              </div>
            </div>
          </section>
          -->

          <!-- Settings Actions - Moved to bottom of settings panel -->

          <!-- Premium Upgrade - Moved to bottom -->
          <section
            class="bg-gradient-to-r from-yellow-50 to-orange-50 border border-yellow-200 rounded-lg p-3"
          >
            <div class="flex items-start gap-3">
              <span class="text-lg">‚≠ê</span>
              <div class="flex-1">
                <h3 class="text-sm font-semibold text-gray-900 mb-1">
                  Upgrade to Premium
                </h3>
                <p class="text-xs text-gray-600 mb-2">
                  Unlock unlimited currencies, real-time rates, and more!
                </p>
                <button
                  id="upgradePremium"
                  class="text-xs bg-yellow-400 text-yellow-900 px-3 py-1 rounded-full font-medium hover:bg-yellow-500 transition-colors"
                >
                  Learn More
                </button>
              </div>
            </div>
          </section>

          <!-- Action Buttons -->
          <div class="flex gap-2" role="group" aria-label="Settings actions">
            <button
              id="saveSettings"
              class="save-button flex-1 bg-primary-500 text-white py-2 px-4 rounded-lg font-medium hover:bg-primary-600 transition-colors"
              aria-describedby="save-settings-desc"
            >
              Save Settings
            </button>
            <button
              id="resetSettings"
              class="reset-button px-4 py-2 border border-gray-300 rounded-lg text-gray-600 hover:bg-gray-50 transition-colors"
              aria-describedby="reset-settings-desc"
            >
              Reset
            </button>
            <div id="save-settings-desc" class="sr-only">
              Save all current settings and preferences.
            </div>
            <div id="reset-settings-desc" class="sr-only">
              Reset all settings to their default values.
            </div>
          </div>

          <!-- Phase 3, Task 3.3: Settings Management -->
          <div class="flex gap-2 text-sm">
            <button
              id="exportSettings"
              class="flex-1 bg-blue-500 text-white py-2 px-3 rounded-lg font-medium hover:bg-blue-600 transition-colors"
            >
              üì§ Export
            </button>
            <button
              id="importSettings"
              class="flex-1 bg-green-500 text-white py-2 px-3 rounded-lg font-medium hover:bg-green-600 transition-colors"
            >
              üì• Import
            </button>
            <button
              id="settingsStats"
              class="flex-1 bg-gray-500 text-white py-2 px-3 rounded-lg font-medium hover:bg-gray-600 transition-colors"
            >
              üìä Stats
            </button>
          </div>

          <!-- Settings Statistics (Hidden by default) -->
          <div
            id="settingsStatsPanel"
            class="hidden bg-gray-50 rounded-lg p-3 space-y-2"
          >
            <h3 class="font-semibold text-gray-800 text-sm">
              Settings Information
            </h3>
            <div class="text-xs text-gray-600 space-y-1">
              <div class="flex justify-between">
                <span>Version:</span>
                <span id="settingsVersion">-</span>
              </div>
              <div class="flex justify-between">
                <span>Install Date:</span>
                <span id="installDate">-</span>
              </div>
              <div class="flex justify-between">
                <span>Last Sync:</span>
                <span id="lastSync">-</span>
              </div>
              <div class="flex justify-between">
                <span>Storage Used:</span>
                <span id="storageUsed">-</span>
              </div>
            </div>
          </div>

          <!-- Hidden file input for import -->
          <input
            type="file"
            id="importFileInput"
            accept=".json"
            style="display: none"
          />
        </div>
        <!-- End Settings Panel -->

        <!-- History Panel -->
        <div
          id="historyPanel"
          class="tab-panel hidden compact-spacing"
          role="tabpanel"
          aria-labelledby="historyTab"
        >
          <!-- History Header -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <span class="text-lg" aria-hidden="true">üìö</span>
              <h2 class="text-base font-semibold text-gray-900">
                Conversion History
              </h2>
            </div>
            <div class="flex gap-2">
              <button
                id="exportHistory"
                class="text-xs px-2 py-1 bg-primary-100 text-primary-700 rounded hover:bg-primary-200 transition-colors"
                title="Export history"
              >
                Export
              </button>
              <button
                id="clearHistory"
                class="text-xs px-2 py-1 bg-red-100 text-red-700 rounded hover:bg-red-200 transition-colors"
                title="Clear history"
              >
                Clear
              </button>
            </div>
          </div>

          <!-- History Stats -->
          <div class="grid grid-cols-2 gap-3">
            <div
              class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3"
            >
              <div class="text-xs text-gray-600">Total Conversions</div>
              <div
                id="totalConversions"
                class="text-lg font-semibold text-primary-600"
              >
                0
              </div>
            </div>
            <div
              class="bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg p-3"
            >
              <div class="text-xs text-gray-600">This Week</div>
              <div
                id="weekConversions"
                class="text-lg font-semibold text-emerald-600"
              >
                0
              </div>
            </div>
          </div>

          <!-- History Filters -->
          <div class="flex gap-2 text-xs">
            <button id="filterAll" class="filter-btn filter-active">All</button>
            <button id="filterToday" class="filter-btn">Today</button>
            <button id="filterWeek" class="filter-btn">Week</button>
            <button id="filterMonth" class="filter-btn">Month</button>
          </div>

          <!-- History List -->
          <div id="historyList" class="space-y-2 max-h-64 overflow-y-auto">
            <!-- History items will be populated by JavaScript -->
            <div class="text-center text-gray-500 text-sm py-8">
              No conversions yet
            </div>
          </div>

          <!-- Popular Pairs -->
          <div class="border-t pt-4">
            <h3 class="text-sm font-medium text-gray-900 mb-2">
              Popular Conversions
            </h3>
            <div id="popularPairs" class="space-y-1">
              <!-- Popular pairs will be populated by JavaScript -->
            </div>
          </div>
        </div>
        <!-- End History Panel -->

        <!-- Favorites Panel -->
        <div
          id="favoritesPanel"
          class="tab-panel hidden compact-spacing"
          role="tabpanel"
          aria-labelledby="favoritesTab"
        >
          <!-- Favorites Header -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <span class="text-lg" aria-hidden="true">‚≠ê</span>
              <h2 class="text-base font-semibold text-gray-900">
                Favorite Conversions
              </h2>
            </div>
            <button
              id="addFavorite"
              class="text-xs px-2 py-1 bg-primary-100 text-primary-700 rounded hover:bg-primary-200 transition-colors"
              title="Add favorite"
            >
              + Add
            </button>
          </div>

          <!-- Add Favorite Form (hidden by default) -->
          <div id="addFavoriteForm" class="hidden add-favorite-form">
            <h3 class="text-sm font-medium mb-3">‚≠ê Add New Favorite</h3>
            <div class="space-y-3">
              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >From Currency</label
                >
                <select id="favFromCurrency" class="currency-select">
                  <option value="">Select currency...</option>
                </select>
              </div>
              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >To Currency</label
                >
                <select id="favToCurrency" class="currency-select">
                  <option value="">Select currency...</option>
                </select>
              </div>
              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >Amount (optional)</label
                >
                <input
                  type="number"
                  id="favAmount"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                  placeholder="e.g. 100"
                  step="0.01"
                />
              </div>
              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >Label (optional)</label
                >
                <input
                  type="text"
                  id="favLabel"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                  placeholder="e.g. Monthly salary"
                />
              </div>
              <div class="form-buttons">
                <button id="saveFavorite" class="btn-save flex-1">
                  Save Favorite
                </button>
                <button id="cancelFavorite" class="btn-cancel flex-1">
                  Cancel
                </button>
              </div>
            </div>
          </div>

          <!-- Favorites List -->
          <div id="favoritesList" class="space-y-2">
            <!-- Favorites will be populated by JavaScript -->
            <div class="text-center text-gray-500 text-sm py-8">
              No favorites yet. Add your frequently used conversions for quick
              access!
            </div>
          </div>

          <!-- Quick Convert from Favorites -->
          <div class="quick-convert-section">
            <div class="quick-convert-header">
              <span class="quick-convert-icon">‚ö°</span>
              <h3 class="quick-convert-title">Quick Convert</h3>
            </div>
            <div class="quick-convert-description">
              Enter an amount and click a favorite conversion below to get
              instant results
            </div>
            <input
              type="number"
              id="quickConvertAmount"
              class="quick-convert-input"
              placeholder="Enter amount (e.g. 100)..."
              step="0.01"
              min="0"
            />
            <div id="quickConvertButtons" class="space-y-1 mt-3">
              <!-- Quick convert buttons will be populated by JavaScript -->
            </div>
          </div>
        </div>
        <!-- End Favorites Panel -->

        <!-- Rate Alerts Panel -->
        <div
          id="alertsPanel"
          class="tab-panel hidden compact-spacing"
          role="tabpanel"
          aria-labelledby="alertsTab"
        >
          <!-- Alerts Header -->
          <div class="flex items-center justify-between">
            <div class="flex items-center gap-2">
              <span class="text-lg" aria-hidden="true">üîî</span>
              <h2 class="text-base font-semibold text-gray-900">Rate Alerts</h2>
            </div>
            <div class="flex gap-2">
              <button
                id="triggerRateCheck"
                class="text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors"
                title="Check rates now"
              >
                üìä Check Now
              </button>
              <button
                id="addAlert"
                class="text-xs px-2 py-1 bg-primary-100 text-primary-700 rounded hover:bg-primary-200 transition-colors"
                title="Add alert"
              >
                + Add Alert
              </button>
            </div>
          </div>

          <!-- Alert Settings Summary -->
          <div
            class="bg-gradient-to-r from-yellow-50 to-orange-50 rounded-lg p-3"
          >
            <div class="flex items-center justify-between text-sm">
              <span class="text-gray-600">Active Alerts</span>
              <span id="activeAlertsCount" class="font-semibold text-yellow-700"
                >0</span
              >
            </div>
            <div class="flex items-center justify-between text-sm mt-1">
              <span class="text-gray-600">Notifications</span>
              <span id="notificationsStatus" class="text-xs text-gray-500"
                >Enabled</span
              >
            </div>
          </div>

          <!-- Add Alert Form (hidden by default) -->
          <div id="addAlertForm" class="hidden setting-card">
            <h3 class="text-sm font-medium text-gray-900 mb-3">
              Create New Rate Alert
            </h3>
            <form id="newAlertForm" class="space-y-3">
              <div class="grid grid-cols-2 gap-3">
                <div>
                  <label class="block text-xs text-gray-600 mb-1"
                    >From Currency</label
                  >
                  <select
                    id="alertFromCurrency"
                    name="fromCurrency"
                    class="currency-select"
                  >
                    <option value="">Select currency...</option>
                  </select>
                </div>
                <div>
                  <label class="block text-xs text-gray-600 mb-1"
                    >To Currency</label
                  >
                  <select
                    id="alertToCurrency"
                    name="toCurrency"
                    class="currency-select"
                  >
                    <option value="">Select currency...</option>
                  </select>
                </div>
              </div>

              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >Alert Condition</label
                >
                <select
                  id="alertType"
                  name="alertType"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                >
                  <option value="above">Rate goes above target</option>
                  <option value="below">Rate goes below target</option>
                  <option value="change">Rate changes by percentage</option>
                </select>
              </div>

              <div>
                <label
                  id="alertTargetLabel"
                  class="block text-xs text-gray-600 mb-1"
                  >Target Rate</label
                >
                <input
                  type="number"
                  id="alertTargetRate"
                  name="targetRate"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                  placeholder="e.g. 1.2500"
                  step="0.0001"
                />
              </div>

              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >Alert Name (optional)</label
                >
                <input
                  type="text"
                  id="alertLabel"
                  name="alertLabel"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                  placeholder="e.g. EUR/USD Watch"
                />
              </div>

              <div class="flex gap-2">
                <button
                  type="submit"
                  class="flex-1 px-3 py-2 bg-primary-600 text-white rounded-lg text-sm hover:bg-primary-700 transition-colors"
                >
                  Create Alert
                </button>
                <button
                  type="button"
                  id="cancelAlert"
                  class="flex-1 px-3 py-2 border border-gray-300 text-gray-700 rounded-lg text-sm hover:bg-gray-50 transition-colors"
                >
                  Cancel
                </button>
              </div>
            </form>
          </div>

          <!-- Alerts List -->
          <div id="alertsList" class="space-y-2">
            <!-- Alerts will be populated by JavaScript -->
            <div
              id="noAlertsMessage"
              class="text-center text-gray-500 text-sm py-8"
            >
              No rate alerts configured. Create your first alert to get notified
              of exchange rate changes!
            </div>
          </div>

          <!-- Alert Settings -->
          <div class="border-t pt-4">
            <h3 class="text-sm font-medium text-gray-900 mb-3">
              Alert Settings
            </h3>

            <div class="space-y-3">
              <div class="flex items-center justify-between">
                <label class="text-sm text-gray-700"
                  >Enable Notifications</label
                >
                <input
                  type="checkbox"
                  id="enableAlertNotifications"
                  class="toggle-checkbox"
                  checked
                />
              </div>

              <div class="flex items-center justify-between">
                <label class="text-sm text-gray-700">Daily Summary</label>
                <input
                  type="checkbox"
                  id="enableDailySummary"
                  class="toggle-checkbox"
                  checked
                />
              </div>

              <div class="flex items-center justify-between">
                <label class="text-sm text-gray-700">Weekly Summary</label>
                <input
                  type="checkbox"
                  id="enableWeeklySummary"
                  class="toggle-checkbox"
                  checked
                />
              </div>

              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >Check Interval (minutes)</label
                >
                <select
                  id="alertCheckInterval"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                >
                  <option value="15">Every 15 minutes</option>
                  <option value="30">Every 30 minutes</option>
                  <option value="60" selected>Every hour</option>
                  <option value="120">Every 2 hours</option>
                  <option value="360">Every 6 hours</option>
                </select>
              </div>

              <div>
                <label class="block text-xs text-gray-600 mb-1"
                  >Summary Time</label
                >
                <input
                  type="time"
                  id="alertSummaryTime"
                  class="w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"
                  value="09:00"
                />
              </div>

              <div class="flex items-center justify-between">
                <label class="text-sm text-gray-700">Quiet Hours</label>
                <input
                  type="checkbox"
                  id="enableQuietHours"
                  class="toggle-checkbox"
                />
              </div>

              <div id="quietHoursSection" class="hidden grid grid-cols-2 gap-2">
                <div>
                  <label class="block text-xs text-gray-600 mb-1">Start</label>
                  <input
                    type="time"
                    id="quietHoursStart"
                    class="w-full px-2 py-1 border border-gray-300 rounded text-sm"
                    value="22:00"
                  />
                </div>
                <div>
                  <label class="block text-xs text-gray-600 mb-1">End</label>
                  <input
                    type="time"
                    id="quietHoursEnd"
                    class="w-full px-2 py-1 border border-gray-300 rounded text-sm"
                    value="08:00"
                  />
                </div>
              </div>

              <button
                id="saveAlertSettings"
                class="w-full px-3 py-2 bg-secondary-600 text-white rounded-lg text-sm hover:bg-secondary-700 transition-colors"
              >
                Save Alert Settings
              </button>
            </div>
          </div>

          <!-- Trend Analysis -->
          <div class="border-t pt-4">
            <div class="flex items-center justify-between mb-3">
              <h3 class="text-sm font-medium text-gray-900">Trend Analysis</h3>
              <button
                id="refreshTrends"
                class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded hover:bg-green-200 transition-colors"
              >
                üìà Refresh
              </button>
            </div>

            <div id="trendsList" class="space-y-2">
              <div class="text-center text-gray-500 text-sm py-4">
                Click "Refresh" to analyze recent exchange rate trends
              </div>
            </div>
          </div>

          <!-- Alert History -->
          <div class="border-t pt-4">
            <h3 class="text-sm font-medium text-gray-900 mb-3">
              Recent Alerts
            </h3>
            <div
              id="alertHistoryList"
              class="space-y-2 max-h-32 overflow-y-auto"
            >
              <div class="text-center text-gray-500 text-sm py-4">
                No recent alerts
              </div>
            </div>
          </div>
        </div>
        <!-- End Alerts Panel -->

        <!-- Subscription Panel -->
        <div
          id="subscriptionPanel"
          class="tab-panel hidden compact-spacing"
          role="tabpanel"
          aria-labelledby="subscriptionTab"
        >
          <!-- Current Plan Header -->
          <div
            class="bg-gradient-to-r from-purple-50 to-blue-50 rounded-lg p-4"
          >
            <div class="flex items-center justify-between">
              <div class="flex items-center gap-3">
                <span class="text-2xl" aria-hidden="true">üíé</span>
                <div>
                  <h2 class="text-lg font-semibold text-gray-900">
                    <span id="currentPlanName">Free Plan</span>
                  </h2>
                  <p class="text-sm text-gray-600" id="currentPlanDescription">
                    Basic features with limited usage
                  </p>
                </div>
              </div>
              <div class="text-right">
                <div
                  class="text-2xl font-bold text-primary-600"
                  id="currentPlanPrice"
                >
                  $0
                </div>
                <div class="text-xs text-gray-500" id="currentPlanInterval">
                  forever
                </div>
              </div>
            </div>
          </div>

          <!-- Usage Statistics -->
          <div class="setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg" aria-hidden="true">üìä</span>
              <h3 class="text-base font-semibold text-gray-900">Usage Stats</h3>
            </div>

            <div id="usageStats" class="space-y-3">
              <!-- Daily Conversions -->
              <div class="usage-item">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm text-gray-700">Daily Conversions</span>
                  <span class="text-sm font-medium" id="conversionsUsage"
                    >0 / 50</span
                  >
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div
                    class="bg-primary-600 h-2 rounded-full transition-all duration-300"
                    id="conversionsProgress"
                    style="width: 0%"
                  ></div>
                </div>
              </div>

              <!-- Currency Pairs -->
              <div class="usage-item">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm text-gray-700">Currency Pairs</span>
                  <span class="text-sm font-medium" id="currenciesUsage"
                    >2 / 2</span
                  >
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div
                    class="bg-secondary-600 h-2 rounded-full transition-all duration-300"
                    id="currenciesProgress"
                    style="width: 100%"
                  ></div>
                </div>
              </div>

              <!-- History Entries -->
              <div class="usage-item">
                <div class="flex justify-between items-center mb-1">
                  <span class="text-sm text-gray-700">History Entries</span>
                  <span class="text-sm font-medium" id="historyUsage"
                    >0 / 10</span
                  >
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                  <div
                    class="bg-green-600 h-2 rounded-full transition-all duration-300"
                    id="historyProgress"
                    style="width: 0%"
                  ></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Usage Warnings -->
          <div id="usageWarnings" class="hidden space-y-2 mb-4">
            <!-- Warnings will be dynamically populated -->
          </div>

          <!-- Feature Comparison -->
          <div class="setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg" aria-hidden="true">‚ö°</span>
              <h3 class="text-base font-semibold text-gray-900">Features</h3>
            </div>

            <div class="space-y-2" id="featureComparison">
              <div
                class="flex items-center justify-between py-2 border-b border-gray-100"
              >
                <span class="text-sm text-gray-700">Daily Conversions</span>
                <span class="text-sm font-medium text-gray-900">50</span>
              </div>
              <div
                class="flex items-center justify-between py-2 border-b border-gray-100"
              >
                <span class="text-sm text-gray-700">Currency Pairs</span>
                <span class="text-sm font-medium text-gray-900">2</span>
              </div>
              <div
                class="flex items-center justify-between py-2 border-b border-gray-100"
              >
                <span class="text-sm text-gray-700">Rate Updates</span>
                <span class="text-sm font-medium text-gray-900">Daily</span>
              </div>
              <div
                class="flex items-center justify-between py-2 border-b border-gray-100"
              >
                <span class="text-sm text-gray-700">History</span>
                <span class="text-sm font-medium text-gray-900"
                  >10 entries</span
                >
              </div>
              <div class="flex items-center justify-between py-2">
                <span class="text-sm text-gray-700">Rate Alerts</span>
                <span class="text-sm text-red-600">‚ùå Not available</span>
              </div>
            </div>
          </div>

          <!-- Upgrade Options -->
          <div id="upgradeSection" class="space-y-3">
            <!-- Premium Plan -->
            <div
              class="plan-card border-2 border-primary-200 rounded-lg p-4 bg-primary-50"
            >
              <div class="flex items-center justify-between mb-3">
                <div>
                  <h4 class="font-semibold text-primary-900">Premium Plan</h4>
                  <p class="text-sm text-primary-700">
                    Perfect for regular users
                  </p>
                </div>
                <div class="text-right">
                  <div class="text-xl font-bold text-primary-600">$4.99</div>
                  <div class="text-xs text-primary-600">/month</div>
                </div>
              </div>

              <div class="space-y-1 mb-4">
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>500 daily conversions</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>20 currency pairs</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>Hourly rate updates</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>100 history entries</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>5 rate alerts</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>Ad-free experience</span>
                </div>
              </div>

              <button
                id="upgradeToPremium"
                class="w-full bg-primary-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-primary-700 transition-colors"
              >
                Upgrade to Premium
              </button>
            </div>

            <!-- Pro Plan -->
            <div
              class="plan-card border-2 border-purple-200 rounded-lg p-4 bg-purple-50"
            >
              <div class="flex items-center justify-between mb-3">
                <div>
                  <h4 class="font-semibold text-purple-900">
                    Professional Plan
                  </h4>
                  <p class="text-sm text-purple-700">
                    For power users & businesses
                  </p>
                </div>
                <div class="text-right">
                  <div class="text-xl font-bold text-purple-600">$14.99</div>
                  <div class="text-xs text-purple-600">/month</div>
                </div>
              </div>

              <div class="space-y-1 mb-4">
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>Unlimited conversions</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>Unlimited currency pairs</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>Real-time rate updates</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>Unlimited history</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>50 rate alerts</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>API access</span>
                </div>
                <div class="flex items-center gap-2 text-sm">
                  <span class="text-green-600">‚úÖ</span>
                  <span>Priority support</span>
                </div>
              </div>

              <button
                id="upgradeToPro"
                class="w-full bg-purple-600 text-white py-2 px-4 rounded-lg font-medium hover:bg-purple-700 transition-colors"
              >
                Upgrade to Pro
              </button>
            </div>
          </div>

          <!-- Payment Provider Selection -->
          <div id="paymentSection" class="hidden setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg" aria-hidden="true">üí≥</span>
              <h3 class="text-base font-semibold text-gray-900">
                Payment Method
              </h3>
            </div>

            <div class="space-y-2" id="paymentProviders">
              <!-- Payment providers will be populated by JavaScript -->
            </div>

            <div class="mt-4 p-3 bg-blue-50 rounded-lg">
              <p class="text-xs text-blue-800">
                üîí Secure payment processing. Cancel anytime from your account
                settings.
              </p>
            </div>
          </div>

          <!-- Current Subscription Management -->
          <div id="subscriptionManagement" class="hidden setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg" aria-hidden="true">‚öôÔ∏è</span>
              <h3 class="text-base font-semibold text-gray-900">
                Manage Subscription
              </h3>
            </div>

            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-700">Status</span>
                <span
                  class="text-sm font-medium text-green-600"
                  id="subscriptionStatus"
                  >Active</span
                >
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-700">Next Billing</span>
                <span class="text-sm font-medium" id="nextBilling">-</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-700">Payment Method</span>
                <span class="text-sm font-medium" id="paymentMethod">-</span>
              </div>
            </div>

            <div class="mt-4 pt-4 border-t border-gray-200">
              <button
                id="cancelSubscription"
                class="w-full bg-red-100 text-red-700 py-2 px-4 rounded-lg font-medium hover:bg-red-200 transition-colors"
              >
                Cancel Subscription
              </button>
            </div>
          </div>

          <!-- Support Options -->
          <div class="setting-card">
            <div class="flex items-center gap-2 mb-3">
              <span class="text-lg" aria-hidden="true">‚ù§Ô∏è</span>
              <h3 class="text-base font-semibold text-gray-900">
                Support Development
              </h3>
            </div>

            <p class="text-sm text-gray-600 mb-3">
              Love the extension? Support our development with a one-time
              donation.
            </p>

            <div class="flex gap-2">
              <button
                id="donate5"
                class="flex-1 bg-green-100 text-green-700 py-2 px-3 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"
              >
                $5
              </button>
              <button
                id="donate10"
                class="flex-1 bg-green-100 text-green-700 py-2 px-3 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"
              >
                $10
              </button>
              <button
                id="donate25"
                class="flex-1 bg-green-100 text-green-700 py-2 px-3 rounded-lg text-sm font-medium hover:bg-green-200 transition-colors"
              >
                $25
              </button>
            </div>
          </div>
        </div>
        <!-- End Subscription Panel -->

        <!-- 
        Phase 9, Task 9.4: Remove unused features
        COMMENTED OUT: Financial Services Offers Section
        -->
        <!--
        <section class="mt-6" aria-label="Affiliate Offers">
          <h2
            class="text-base font-semibold mb-2 text-primary-700 flex items-center gap-2"
          >
            <span aria-hidden="true">ü§ù</span> Financial Services Offers
          </h2>
          <div id="affiliateOffers" class="space-y-2"></div>
          <div class="text-xs text-gray-400 mt-1">
            These are affiliate links. We may earn a commission if you sign up.
          </div>
        </section>
        -->
      </main>

      <!-- Footer -->
      <footer
        class="border-t border-gray-200 p-3 bg-gray-50"
        role="contentinfo"
      >
        <div class="flex items-center justify-between text-xs text-gray-500">
          <span id="version" aria-label="Extension version">v1.0.0</span>
          <nav
            class="flex items-center gap-2"
            role="navigation"
            aria-label="Footer links"
          >
            <button
              id="rateUs"
              class="hover:text-primary-600 transition-colors"
              aria-label="Rate this extension"
            >
              Rate Us
            </button>
            <span aria-hidden="true">‚Ä¢</span>
            <button
              id="support"
              class="hover:text-primary-600 transition-colors"
              aria-label="Get support"
            >
              Support
            </button>
            <span aria-hidden="true">‚Ä¢</span>
            <button
              id="help"
              class="hover:text-primary-600 transition-colors"
              aria-label="View help documentation"
            >
              Help
            </button>
            <span aria-hidden="true">‚Ä¢</span>
            <button
              id="donateButton"
              class="hover:text-pink-600 font-semibold transition-colors"
              aria-label="Donate to support development"
            >
              Donate
            </button>
          </nav>
        </div>
      </footer>

      <!-- Status Message -->
      <div
        id="statusMessage"
        class="hidden fixed top-4 left-1/2 transform -translate-x-1/2 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300"
        role="status"
        aria-live="polite"
        aria-atomic="true"
      >
        Settings saved successfully!
      </div>
    </div>

    <script type="module" src="popup-main.js"></script>
  </body>
</html>
